(function(e){function t(t){for(var a,c,i=t[0],r=t[1],u=t[2],p=0,f=[];p<i.length;p++)c=i[p],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var r=n[i];0!==o[r]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},s=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],r=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=r;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1307:function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{is_collapse:!1,menu:[]},mutations:{SET_MENU:function(e,t){e.menu=t},SET_COLLAPSE_STATUS:function(e,t){e.is_collapse=t}},actions:{setMenu:function(e,t){var n=e.commit;n("SET_MENU",t)},setCollapseStatus:function(e,t){var n=e.commit;n("SET_COLLAPSE_STATUS",t)}}}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("4160"),n("b0c0"),n("159b");var a=n("2909"),o=n("2b0e"),s=(n("d3b7"),n("5530")),c=n("5c96");function i(e){Object(c["Message"])({showClose:!0,message:e})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(s["a"])({confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"},n);return new Promise((function(n){c["MessageBox"].confirm(e,t,a).then((function(){return n(!0)}))["catch"]((function(){return n(!1)}))}))}var u={components:[c["Button"],c["Menu"],c["Submenu"],c["MenuItem"],c["MenuItemGroup"],c["Scrollbar"],c["Input"],c["Divider"]],serve:[c["Loading"]],methods:[i,r]};n("0fae");Object(a["a"])(u.components).forEach((function(e){return o["default"].use(e)})),u.serve.forEach((function(e){o["default"].use(e.directive)})),u.methods.forEach((function(e){o["default"].prototype["".concat(e.name)]=e}));n("a96f");var l=n("8c4f");o["default"].use(l["a"]);var p=new l["a"]({mode:"history",base:"/",routes:[]}),f=p,d=(n("2ca0"),n("13d5"),n("ac1f"),n("5319"),n("ddb0"),n("2f62")),m={menu:function(e){return e.menu.menu},is_collapse:function(e){return e.menu.is_collapse},size:function(e){return e.app.size},token:function(e){return e.app.arkToken},msg:function(e){return e.appstore.msg},user_info:function(e){return e.app.user_info},app_config:function(e){return e.app.app_config}},h=m;o["default"].use(d["a"]);var b=n("c653"),v=b.keys().reduce((function(e,t){var n=t.replace(/^\.\/(.*)\.\w+$/,"$1"),a=b(t);return e[n]=a["default"],e}),{}),_=new d["a"].Store({modules:v,getters:h}),g=_;f.beforeEach((function(e,t,n){e.path.startsWith("/sub-sql-panel")?(g.dispatch("app/setAppConfig",{showAppSidebar:!1}),g.dispatch("menu/setCollapseStatus",!0)):(g.dispatch("app/setAppConfig",{showAppHeader:!0,showAppSidebar:!0}),g.dispatch("menu/setCollapseStatus",!1)),n()}));var S=f,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container",attrs:{id:"root"}},[e.isLogin?[e.app_config.showAppHeader?n("the-nav"):e._e(),n("div",{staticClass:"main-container-content"},[e.app_config.showAppSidebar?n("the-menu",{staticClass:"main-menu-box"}):e._e(),n("div",{staticClass:"main-container-view",class:e.app_config.showAppSidebar?e.is_collapse?"collapse":"":"total_collapse"},[n("div",{staticClass:"app-view-box",attrs:{id:"subapp-viewport"}})])],1)]:n("div",{staticClass:"app-view-box",attrs:{id:"subapp-viewport"}})],2)},C=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"themenu-sidebar",class:e.is_collapse?"is_collapse":""},[n("el-menu",{staticClass:"the-menu",attrs:{collapse:e.is_collapse,"text-color":e.themeMenu.text,"active-text-color":e.themeMenu.active_text,"default-active":e.routerPath,"unique-opened":""}},[e._l(e.menu,(function(t){return[!t.children||t.children&&!t.children.length?n("el-menu-item",{key:t.id,attrs:{index:t.prefix+t.path},on:{click:function(n){return e.handleClickLevel1(t)}}},[n("i",{staticClass:"menu-icon",class:t.icon}),n("span",{staticClass:"menu-sub-title"},[e._v(e._s(t.name))])]):n("el-submenu",{key:t.id,attrs:{index:"/"+t.path}},[n("template",{slot:"title"},[n("i",{staticClass:"menu-icon",class:t.icon}),n("span",{staticClass:"menu-sub-title"},[e._v(e._s(t.name))])]),e._l(t.children,(function(a){return n("el-menu-item",{key:a.id,attrs:{index:t.prefix+"/"+t.path+"/"+a.path},on:{click:function(n){return e.goto("",t.prefix+"/"+t.path+"/"+a.path)}}},[n("span",{staticClass:"menu-sub-title"},[e._v(e._s(a.name))])])}))],2)]}))],2),n("div",{staticClass:"sidebar-footer",on:{click:e.setMenuCollapseStatus}},[n("i",{attrs:{"icon-class":e.is_collapse?"el-icon-back":"el-icon-right"}})])],1)},E=[];function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.history.pushState(n,t,e.startsWith("/")?e:"/".concat(e))}var j={name:"theMenu",data:function(){return{theme_menu:{text:"#fff",active_text:"#ffd04b"}}},computed:Object(s["a"])({themeMenu:function(){return this.theme_menu},routerPath:function(){return this.$route.path}},Object(d["b"])(["menu","is_collapse"])),methods:{goto:function(e,t){x(t,e)},handleClickLevel1:function(e){var t=e.children&&e.children.length;t||this["goto"]("",e.prefix+e.path)},setMenuCollapseStatus:function(){this.$store.dispatch("menu/setCollapseStatus",!this.is_collapse)}}},T=j,k=(n("d352"),n("2877")),y=Object(k["a"])(T,w,E,!1,null,null,null),A=y.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"the-nav"},[n("div",{staticClass:"the-menu-logo"},[n("router-link",{attrs:{to:"/"}},[n("img",{staticClass:"logo-img",attrs:{src:e.Logo}})])],1),n("div",{staticClass:"info"},[n("div",{staticClass:"cur-time"},[e._v(e._s(e.curTime))]),n("el-divider",{attrs:{direction:"vertical"}}),n("div",{staticClass:"user-content"},[n("span",{staticClass:"user-name"},[e._v(e._s(e.userInfo.name))]),e._v(" - "),n("span",{staticClass:"department"},[e._v(e._s(e.userInfo.department))])])],1),n("div",{staticClass:"header-opr"},[n("el-divider",{attrs:{direction:"vertical"}}),n("div",{staticClass:"contact-content"},[n("span",{staticClass:"log-out",on:{click:e.handleLogout}},[n("i",{staticClass:"el-icon-switch-button",staticStyle:{"font-size":"14px"}}),n("span",{staticClass:"out"},[e._v("退出")])])])],1)])},M=[],P=(n("99af"),n("4795"),n("96cf"),n("1da1")),F=n("5a0c"),G=n.n(F),R=n("ba39"),I=n.n(R),N={name:"theNav",data:function(){return{Logo:I.a,user_name:"Admin",full_screen:!1,curTime:""}},computed:Object(s["a"])({isCollapse:function(){return this.$store.getters.is_collapse}},Object(d["b"])({subappMsg:"msg",userInfo:"user_info"})),created:function(){var e=this,t=["日","一","二","三","四","五","六"];setInterval((function(){var n=G()().day();e.curTime="".concat(G()().format("YYYY-MM-DD HH:mm:ss")," 星期").concat(t[n])}),1e3)},methods:{setMenuCollapseStatus:function(){this.$store.dispatch("menu/setCollapseStatus",!this.isCollapse)},handleFullScreen:function(){var e=document.documentElement;this.full_screen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.full_screen=!this.full_screen},notYetOpened:function(){this.$message({})},handleLogout:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("app/logOut");case 2:location.reload();case 3:case"end":return t.stop()}}),t)})))()}}},B=N,$=(n("927c"),Object(k["a"])(B,L,M,!1,null,null,null)),U=$.exports,q={name:"rootView",components:{TheMenu:A,TheNav:U},computed:Object(s["a"])({isLogin:function(){return!0}},Object(d["b"])(["app","app_config","is_collapse"]))},z=q,D=(n("5c0b"),Object(k["a"])(z,O,C,!1,null,null,null)),H=D.exports;o["default"].config.productionTip=!1,new o["default"]({router:S,store:g,render:function(e){return e(H)}}).$mount("#main-container");var V=n("34ac9"),Y=n("07ec"),K=n("e223"),J=n("c1fb"),W=function(e){var t=e({appsRefresh:!1}),n=t.onGlobalStateChange,a=t.setGlobalState;n((function(e,t){console.log("[onGlobalStateChange - master]:",e,t),"msg"in e&&g.dispatch("appstore/setMsg",e.msg)})),a({ignore:"main",methods:{request:J["a"]},mainConfing:{token:g.getters.token,user_info:g.getters.user_info}})},Z={http:J["a"]},Q=Z,X="#subapp-viewport",ee={data:g.getters,GLOBAL:Q},te=function(e){var t=[],n=null;e.forEach((function(e){t.push({name:e.name,entry:e.entry,container:X,activeRule:e.routerBase,props:Object(s["a"])(Object(s["a"])({},ee),{},{routes:e.data,routerBase:e.routerBase}),loader:function(e){e?g.dispatch("app/setAppGlobalLoading",{show:!0}):g.dispatch("app/setAppGlobalLoading",{show:!1})}}),e.defaultRegister&&(n=e.routerBase)})),Object(V["b"])(t,{beforeLoad:[function(e){console.log("[LifeCycle] before load %c%s","color: green;",e.name)}],beforeMount:[function(e){console.log("[LifeCycle] before mount %c%s","color: green;",e.name)}],afterUnmount:[function(e){console.log("[LifeCycle] after unmount %c%s","color: green;",e.name)}]}),Object(Y["b"])(n+"/"),Object(V["c"])({sandbox:{},singular:!1}),Object(Y["a"])((function(){})),W(K["b"])},ne=te,ae=(n("d81d"),location.host),oe="production",se="development"===oe?"//localhost:8081/subapp/sub-vue-cli2/":"//".concat(ae,"/subapp/sub-vue-cli2/"),ce="development"===oe?"//localhost:8010/subapp/sub-vue-cli4/":"//".concat(ae,"/subapp/sub-vue-cli4/"),ie="development"===oe?"//localhost:8020/subapp/sub-react/":"//".concat(ae,"/subapp/sub-react/"),re=[{name:"sub-vue-cli2",entry:se,routerBase:"/sub-vue-cli2",defaultRegister:!0},{name:"sub-vue-cli4",entry:ce,routerBase:"/sub-vue-cli4"},{name:"sub-react",entry:ie,routerBase:"/sub-react"}],ue=re.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{container:"#subapp-viewport",props:{routerBase:e.routerBase,getGlobalState:g.getGlobalState}})})),le=ue,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._v(" menu1 "),n("router-view")],1)},fe=[],de={},me=de,he=Object(k["a"])(me,pe,fe,!1,null,"34972a1d",null),be=he.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._v(" path1 ")])},_e=[],ge={},Se=ge,Oe=Object(k["a"])(Se,ve,_e,!1,null,"81d41616",null),Ce=Oe.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._v(" path2 ")])},Ee=[],xe={},je=xe,Te=Object(k["a"])(je,we,Ee,!1,null,"dc75b2d6",null),ke=Te.exports,ye=[{id:1,path:"/",component:H,children:null,name:"首页",icon:"el-icon-star-on",prefix:"/sub-vue-cli2"},{id:526,name:"菜单1",path:"menu1",component:be,icon:"el-icon-s-data",prefix:"/sub-vue-cli2",children:[{id:527,name:"菜单1-1",path:"path1",component:Ce},{id:528,name:"菜单1-2",path:"path2",component:ke}]},{id:626,name:"菜单2",path:"menu2",component:be,icon:"el-icon-help",prefix:"/sub-vue-cli4",children:[{id:627,name:"菜单2-1",path:"path1",component:Ce},{id:628,name:"菜单2-2",path:"path2",component:ke}]},{id:726,name:"React app",path:"menu3",component:be,icon:"el-icon-help",prefix:"/sub-react",children:[{id:627,name:"菜单3-1",path:"path1",component:Ce}]}],Ae={name:"Pluto",permissions:["admin"],roles:["admin"],department:"研发部",id:"NC01291523"},Le="token",Me=function(){g.dispatch("menu/setMenu",ye),g.dispatch("app/setAuthToken",Le),g.dispatch("app/setUserInfo",Ae),ne(Object(a["a"])(le))},Pe=Me;Pe()},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),o=n.n(a);o.a},"6c9a":function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{msg:""},mutations:{SET_MSG_VALUE:function(e,t){e.msg=t}},actions:{setMsg:function(e,t){var n=e.commit;n("SET_MSG_VALUE",t)}}}},"927c":function(e,t,n){"use strict";var a=n("db98"),o=n.n(a);o.a},"9c0c":function(e,t,n){},a96f:function(e,t,n){},ba39:function(e,t,n){e.exports=n.p+"img/logo_header.aa919d75.png"},c1fb:function(e,t,n){"use strict";var a=n("bc3a"),o=n.n(a),s=6e5,c=o.a.create({baseURL:"",timeout:s,withCredentials:!1});t["a"]=c},c653:function(e,t,n){var a={"./app.js":"d9cd","./appstore.js":"6c9a","./menu.js":"1307"};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=s,e.exports=o,o.id="c653"},d352:function(e,t,n){"use strict";var a=n("f173"),o=n.n(a);o.a},d9cd:function(e,t,n){"use strict";n.r(t);n("96cf");var a=n("1da1"),o=n("5530"),s=n("852e"),c=n.n(s),i=n("c1fb"),r=function(){return i["a"].post("/api/auth/logout/")},u=n("5c96"),l=null;t["default"]={namespaced:!0,state:{size:10,auth_token:"",user_info:{},app_config:{showAppHeader:!0,showAppSidebar:!0}},mutations:{SET_PAGE_SIZE:function(e,t){e.size=t},SET_TOKEN:function(e,t){e.auth_token=t,c.a.set("auth_token",t)},REMOVE_TOKEN:function(e,t){c.a.remove("auth_token")},SET_USER_INFO:function(e,t){e.user_info=t},SET_APP_CONFIG:function(e,t){e.app_config=Object(o["a"])(Object(o["a"])({},e.app_config),t)},SET_APP_GLOBAL_LOADING:function(e,t){t&&t.show?(delete t.show,l=u["Loading"].service(Object(o["a"])({lock:!0,text:"loading...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"},t))):(l&&l.close(),l=null)}},actions:{setPageSize:function(e,t){var n=e.commit;n("SET_PAGE_SIZE",t)},setAuthToken:function(e,t){var n=e.commit;n("SET_TOKEN",t)},setUserInfo:function(e,t){var n=e.commit;n("SET_USER_INFO",t)},setAppConfig:function(e,t){var n=e.commit;n("SET_APP_CONFIG",t)},logOut:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,r();case 3:n("REMOVE_TOKEN");case 4:case"end":return t.stop()}}),t)})))()},setAppGlobalLoading:function(e,t){var n=e.commit;n("SET_APP_GLOBAL_LOADING",t)}}}},db98:function(e,t,n){},f173:function(e,t,n){}});
//# sourceMappingURL=app.6cff517d.js.map